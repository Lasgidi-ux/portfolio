# üöÄ DevOps Portfolio API Documentation

## Overview

This document describes the backend API endpoints that power the interactive DevOps simulations in the portfolio. All endpoints use Next.js API routes and return realistic mock data to create an immersive experience.

---

## üìã API Endpoints

### 1. üõ†Ô∏è NeoPipeline (CI/CD Pipeline Visualizer)

**Endpoint:** `GET /api/ci-pipeline`

**Description:** Returns simulated CI/CD pipeline runs with realistic job data.

**Response:**
```json
{
  "pipelines": [
    {
      "id": "pipeline-1",
      "name": "feature/user-auth",
      "status": "running",
      "stage": "test",
      "duration": 145,
      "startTime": "2024-01-15T10:30:00Z",
      "endTime": null,
      "logs": ["[2024-01-15T10:30:00Z] INFO: Starting test stage..."],
      "yamlConfig": "# CI/CD Pipeline Configuration...",
      "branch": "feature/user-auth",
      "commit": "a1b2c3d4",
      "triggeredBy": "github-webhook"
    }
  ],
  "summary": {
    "total": 5,
    "running": 1,
    "success": 3,
    "failed": 1,
    "queued": 0
  },
  "lastUpdated": "2024-01-15T10:35:00Z"
}
```

**POST Actions:**
- `trigger` - Simulate triggering a new pipeline
- `cancel` - Cancel a running pipeline
- `retry` - Retry a failed pipeline

---

### 2. ‚ò∏Ô∏è KubEye (Kubernetes Dashboard)

**Endpoint:** `GET /api/kubernetes-metrics`

**Description:** Returns simulated Kubernetes cluster metrics and health data.

**Query Parameters:**
- `namespace` - Filter pods by namespace
- `node` - Filter pods by node

**Response:**
```json
{
  "cluster": {
    "name": "production-cluster",
    "version": "v1.28.0",
    "provider": "AWS EKS",
    "region": "us-west-2"
  },
  "nodes": [
    {
      "id": "node-1",
      "name": "worker-node-1",
      "type": "worker",
      "status": "Ready",
      "cpu": { "usage": 45, "capacity": 100, "unit": "%" },
      "memory": { "usage": 67, "capacity": 100, "unit": "%" },
      "pods": { "running": 12, "total": 15 }
    }
  ],
  "pods": [
    {
      "id": "pod-1",
      "name": "auth-service-123",
      "namespace": "default",
      "status": "Running",
      "service": "auth-service",
      "cpu": { "usage": 23, "limit": 100, "unit": "%" },
      "memory": { "usage": 156, "limit": 512, "unit": "MB" },
      "restarts": 0,
      "age": "2h15m"
    }
  ],
  "events": [
    {
      "id": "event-1",
      "type": "PodScheduled",
      "severity": "Normal",
      "message": "Successfully assigned pod to node",
      "timestamp": "2024-01-15T10:30:00Z"
    }
  ],
  "health": {
    "nodes": { "total": 5, "ready": 5, "healthPercentage": 100 },
    "pods": { "total": 25, "running": 23, "healthPercentage": 92 },
    "overall": 96
  }
}
```

**POST Actions:**
- `scale` - Scale a deployment
- `restart` - Restart a pod/deployment
- `delete` - Delete a resource

---

### 3. üß± TerraformX (Infrastructure-as-Code Builder)

**Endpoint:** `POST /api/terraform-preview`

**Description:** Generates Terraform HCL code and plan output based on simulated resources.

**Request Body:**
```json
{
  "resources": [
    { "type": "aws_instance", "name": "web-server" },
    { "type": "aws_s3_bucket", "name": "data-bucket" }
  ]
}
```

**Response:**
```json
{
  "hcl": "# Terraform configuration generated by TerraformX...",
  "plan": {
    "summary": {
      "summary": "Plan: 2 to add, 0 to change, 0 to destroy.",
      "details": { "toAdd": 2, "toChange": 0, "toDestroy": 0, "total": 2 }
    },
    "resources": [
      {
        "type": "aws_instance",
        "name": "web-server",
        "action": "create",
        "description": "Amazon EC2 instance"
      }
    ]
  },
  "terminal": "Terraform will perform the following actions:\n\n+ aws_instance.web-server...",
  "metadata": {
    "generatedAt": "2024-01-15T10:30:00Z",
    "resourceCount": 2,
    "estimatedCost": "$31.00/month",
    "complexity": "Medium"
  }
}
```

**Available Resources:**
- `aws_instance` - EC2 Instance
- `aws_s3_bucket` - S3 Bucket
- `aws_vpc` - VPC
- `aws_rds_cluster` - RDS Cluster
- `aws_lambda_function` - Lambda Function

---

### 4. üì° LogFusion (Real-Time Logs Simulator)

**Endpoint:** `GET /api/log-stream`

**Description:** Returns simulated real-time logs with filtering capabilities.

**Query Parameters:**
- `level` - Filter by log level (INFO, ERROR, WARN, DEBUG, FATAL)
- `service` - Filter by service name
- `limit` - Number of log entries (default: 20)
- `since` - Filter logs since timestamp

**Response:**
```json
{
  "logs": [
    {
      "id": "log-1",
      "timestamp": "2024-01-15T10:30:15Z",
      "service": "auth-service",
      "level": "INFO",
      "message": "Request processed successfully for user 12345",
      "traceId": "trace-123456",
      "spanId": "span-789",
      "userId": "user-12345",
      "requestId": "req-987654",
      "duration": 145,
      "ip": "192.168.1.100"
    }
  ],
  "stats": {
    "total": 20,
    "byLevel": { "INFO": 12, "ERROR": 2, "WARN": 3, "DEBUG": 2, "FATAL": 1 },
    "byService": { "auth-service": 5, "user-service": 3, "api-gateway": 4 },
    "timeRange": { "start": "2024-01-15T10:20:00Z", "end": "2024-01-15T10:30:00Z" }
  },
  "filters": {
    "level": "all",
    "service": "all",
    "limit": 20,
    "since": "last 10 minutes"
  }
}
```

**POST Actions:**
- `clear` - Clear log buffer
- `export` - Export logs to file
- `search` - Search logs with query

---

### 5. ü§ñ ChatOps-2030 (Bot Command Interface)

**Endpoint:** `POST /api/chatops`

**Description:** Processes DevOps commands and returns simulated bot responses.

**Request Body:**
```json
{
  "command": "/deploy production v2.1.0",
  "userId": "user-123",
  "channel": "devops"
}
```

**Response:**
```json
{
  "messages": [
    {
      "id": "msg-1234567890-0",
      "author": "user-123",
      "timestamp": "2024-01-15T10:30:00Z",
      "content": "/deploy production v2.1.0",
      "type": "command",
      "status": "info"
    },
    {
      "id": "msg-1234567890-1",
      "author": "OpsBot",
      "timestamp": "2024-01-15T10:30:02Z",
      "content": "üöÄ Starting deployment to **production** environment...",
      "type": "response",
      "status": "info"
    }
  ],
  "command": "/deploy",
  "args": ["production", "v2.1.0"],
  "metadata": {
    "channel": "devops",
    "timestamp": "2024-01-15T10:30:00Z",
    "executionTime": 1500
  }
}
```

**Available Commands:**
- `/deploy <environment> [version]` - Deploy application
- `/rollback <environment> [version]` - Rollback deployment
- `/status [service]` - Check system health
- `/scale <service> <replicas>` - Scale service
- `/logs <service> [lines]` - Get service logs
- `/help [command]` - Show command help

---

## üîß Technical Details

### Error Handling
All endpoints return appropriate HTTP status codes:
- `200` - Success
- `400` - Bad Request (invalid parameters)
- `500` - Internal Server Error

### Data Generation
- All data is generated dynamically using realistic patterns
- Timestamps are current and consistent
- IDs are unique and follow naming conventions
- Randomization creates variety while maintaining realism

### Performance
- Responses are generated quickly (< 100ms)
- No external dependencies or database calls
- Optimized for frontend consumption

### Mock Data Characteristics
- **Realistic Values:** CPU usage, memory, response times
- **Proper Formatting:** ISO timestamps, proper JSON structure
- **Consistent Naming:** Follows industry conventions
- **Dynamic Content:** Changes on each request for realism

---

## üéØ Frontend Integration

### Real-time Updates
- Use `setInterval` to poll endpoints for live data
- Implement WebSocket-like behavior with regular API calls
- Update UI components with fresh data

### Error Handling
- Gracefully handle API errors
- Show fallback data when endpoints fail
- Implement retry logic for failed requests

### State Management
- Cache API responses for performance
- Implement optimistic updates for user actions
- Maintain consistent state across components

---

## üöÄ Usage Examples

### Fetching Pipeline Data
```javascript
const response = await fetch('/api/ci-pipeline')
const data = await response.json()
// Update pipeline visualization
```

### Triggering Deployment
```javascript
const response = await fetch('/api/chatops', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ command: '/deploy staging' })
})
const data = await response.json()
// Show deployment progress
```

### Filtering Logs
```javascript
const response = await fetch('/api/log-stream?level=error&service=auth-service')
const data = await response.json()
// Display filtered logs
```

---

**üéä These API endpoints provide a complete backend simulation that makes the DevOps portfolio feel truly interactive and realistic! üéä** 